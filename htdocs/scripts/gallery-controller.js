var isEmpty=function(e){return"object"==typeof e?"{}"===JSON.stringify(e)||"[]"===JSON.stringify(e)||!e:"string"==typeof e?!e.trim():void 0===e};function*infinite(){let e=0;for(;;)yield e++}const generator=infinite();function getNewId(){return"css"+generator.next().value}function getCSSID(e){var r;return $(e).hasAttr("id")?(console.log("read"),r=$(e).attr("id")):(console.log("set"),r=getNewId(),$(e).attr("id",r)),r}function whichTransitionEvent(){var e,r=document.createElement("fakeelement"),t={animation:"animationend",OAnimation:"oAnimationEnd",MSAnimation:"MSAnimationEnd",mozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in t)if(t.hasOwnProperty(e)&&void 0!==r.style[e])return t[e]}function getKeyByValue(r,t){return Object.keys(r).find(e=>r[e]===t)}$.fn.hasAttr=function(e){return void 0!==this.attr(e)},$.fn.redraw=function(){return $(this).each(function(){this.offsetHeight})},$.fn.extend({animateCss:function(e,r){return this.addClass("animate__animated animate__"+e).one(whichTransitionEvent(),function(){$(this).removeClass("animate__animated animate__"+e),!0===r?$(this).remove():r&&r(this)}),this},animateCss2:function(e,r){return this.addClass("animate__animated animate__"+e).one(whichTransitionEvent(),function(){$(this).removeClass("animate__animated animate__"+e),!0===r?$(this).remove():r&&r(this)}),this}}),function(e){e.extend({playSound:function(){return e('<audio class="sound-player" autoplay="autoplay" style="display:none;"><source src="'+arguments[0]+'" /><embed src="'+arguments[0]+'" hidden="true" autostart="true" loop="false"/></audio>').appendTo("body")},stopSound:function(){e(".sound-player").remove()}})}(jQuery);const myToast=document.getElementById("myToast"),myToasts=document.getElementById("myToasts"),myAlert=document.getElementById("myAlert"),myAlerts=$("#page .page-content");function toastit_warning(e,r,t){quickToast("ADVARSEL",e,r,t)}function quickAlert(e,r,t){let o,a;switch(e){case"alert":case"error":o='<use xlink:href="#exclamation-triangle-fill"/>',a="bg-red-dark";break;case"warning":o='<use xlink:href="#exclamation-triangle-fill"/>',a="bg-yellow-dark";break;case"success":o='<use xlink:href="#check-circle-fill"/>',a="bg-green-dark";break;default:o='<use xlink:href="#info-fill"/>',a="bg-blue-dark"}var n=$(myAlert).clone().removeAttr("id").prependTo(myAlerts);$(n).addClass(a).find("svg").attr("aria-label",e).html(o).parent().next().html(r).after('<div class="body">'+t+"</div>"),$(n).show()}function quickToast(e,...r){let t,o,a;3===r.length?(t=r[0],o=r[1],a=r[2],isEmpty(o)&&(o=getTimeHourString())):(t=r[0],o=getTimeHourString(),a=r[1]);let n,s;switch(e){case"alert":s=2500,n="#ff0000";break;case"error":s=0,n="#ff0000";break;case"warning":s=5e3,n="#ffff44";break;case"success":s=2500,n="#239d40";break;default:s=2500,n="#1873bc"}r=$(myToast).clone().removeAttr("id").appendTo(myToasts),e=$(r).data("menu-hide")??s;$(r).find(".toast-header svg rect").attr("fill",n).parent().next().html(t).next().html(o).parent().next().html(a),(e?new bootstrap.Toast(r,{autohide:!0,delay:e}):new bootstrap.Toast(r,{autohide:!1})).show()}function getTimeHourString(){var e=new Date;let r=e.getHours().toString(),t=e.getMinutes().toString();return r.length<2&&(r="0"+r),t.length<2&&(t="0"+t),r+":"+t}function getAjaxObj(e,r,t,o){var a;e="object"==typeof r?(a={data:t,command:e,module:r.mod},r.url):(a={data:t,command:e,module:r},KistaJS&&KistaJS.ajaxurl?KistaJS.ajaxurl:"ajax.php"),t.CSSID;$.ajax({type:"post",url:e,data:a,cache:!1,error:function(e,r,t){isEmpty(e.responseJSON)?($("#ajaxErrorModal").find(".modal-body").html(e.responseText),$("#ajaxErrorModal").find(".modal-header .modal-title").html(e.status+": "+t.toString()),$("#ajaxErrorModal").modal("show")):console.log("error here"),o("Error occured")},success:function(e,r,t){console.log("ajax complete"),100==e.status?o(null,e):o(e.status,e)}}).always(function(e){})}function getAjaxObj2(e,r,t,o){var a;t="object"==typeof r?(a={data:t,command:e,module:r.mod},r.url):(a={data:t,command:e,module:r},KistaJS&&KistaJS.ajaxurl?KistaJS.ajaxurl:"ajax.php"),$.ajax({type:"post",url:t,data:a,cache:!1,error:function(e,r,t){isEmpty(e.responseJSON)?($("#ajaxErrorModal").find(".modal-body").html(e.responseText),$("#ajaxErrorModal").find(".modal-header .modal-title").html(e.status+": "+t.toString()),$("#ajaxErrorModal").modal("show")):e.responseJSON.hasOwnProperty("errormsg")&&e.responseJSON.hasOwnProperty("errorcode")?quickToast("error","AJAX Error, code #"+e.responseJSON.errorcode,"",e.responseJSON.errormsg):quickToast("error","AJAX Generic error","","This is not a good enough error, fix when you see me!")},success:function(e,r,t){return isEmpty(t.responseJSON)?(document.getElementById("ajaxErrorModal")?($("#ajaxErrorModal").find(".modal-header .modal-title").html("AJAX ERROR - DUMP"),$("#ajaxErrorModal").find(".modal-body").html(t.responseText),$("#ajaxErrorModal").modal("show")):$("body").prepend('<div style="position:fixed;top:0;left:0;width:100%;text-align:center;z-index:99999"><div style="background-color:red;border:2px solid black;padding:1em;margin:1em;color:white;"><h3>MISSING ajaxErrorModal!</h3>'+t.responseText+"</div></div>"),""):!isEmpty(e.responseJSON)&&e.responseJSON.hasOwnProperty("errormsg")&&e.responseJSON.hasOwnProperty("errorcode")?(quickToast("error","AJAX Error #"+e.responseJSON.errorcode,"",e.responseJSON.errormsg),""):!isEmpty(e)&&e.hasOwnProperty("errormsg")&&e.hasOwnProperty("errorcode")?(quickToast("error","AJAX Error #"+e.errorcode,"",e.errormsg),""):a.data&&a.data.hasOwnProperty("CSSID")&&!e.hasOwnProperty("CSSID")?(quickToast("error","AJAX Data Error","","CSSID is not returned in request, remove the CSSID parameter or make sure its returned."),""):void o(e)}}).always(function(e){})}function __ajaxErrorModal(e,r,t){console.log("error __ajaxErrorModal init"),$("#ajaxErrorModal").length?(isEmpty(e.responseJSON)||!e.responseJSON.hasOwnProperty("errorcode")?($("#ajaxErrorModal").find(".modal-body").html(e.responseText),$("#ajaxErrorModal").find(".modal-header .modal-title").html(e.status+": "+t.toString())):($("#ajaxErrorModal").find(".modal-body").html(e.responseJSON.errormsg),$("#ajaxErrorModal").find(".modal-header .modal-title").html(t.toString()+" "+e.responseJSON.errorcode)),$("#ajaxErrorModal").modal("show")):(window.bootstrap&&bootstrap.Toast?quickToast("#ajaxErrorModal ??","akkurat nå","Det mangler et modalvindu i siden, #ajaxErrorModal. Denne er påkrevd når __ajaxErrorModal callback brukes."):alert("#ajaxErrorModal is missing!"),console.log("ERROR! "+e.status+": "+t.toString()))}